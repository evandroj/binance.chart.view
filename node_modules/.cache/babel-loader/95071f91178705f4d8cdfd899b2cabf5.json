{"ast":null,"code":"var _jsxFileName = \"/home/evandro/MEGA/Projetos/estudo/tradingview/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport Chart from './Chart';\nimport Candle from './Candle';\nimport { getCandles } from './DataService';\nimport useWebSocket from 'react-use-websocket';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [symbol, setSymbol] = useState('BTCUSDT');\n  const [interval, setInterval] = useState('1m');\n  const [data, setData] = useState([]);\n  useEffect(() => {\n    getCandles(symbol, interval).then(data => setData(data)).catch(err => console.log(err));\n  }, [symbol, interval]);\n  const {\n    lastJsonMessage\n  } = useWebSocket(`wss://stream.binance.com:9443/ws/${symbol.toLowerCase()}@kline_${interval}`, {\n    onOpen: () => console.log('Connected to Binance'),\n    onError: err => console.log(err),\n    shouldReconnect: () => true,\n    reconnectInterval: 3000,\n    onMessage: () => {\n      if (lastJsonMessage) {\n        const newCandle = new Candle(lastJsonMessage.k.t, lastJsonMessage.k.o, lastJsonMessage.k.h, lastJsonMessage.k.l, lastJsonMessage.k.c);\n        const newData = [...data];\n\n        if (!lastJsonMessage.k.x) {\n          newData[newData.length - 1] = newCandle;\n        } else {\n          newData.splice(0, 1);\n          newData.push(newCandle);\n        }\n\n        setData(newData);\n      }\n    }\n  });\n\n  function onSymbolChange(event) {\n    setSymbol(event.target.value);\n  }\n\n  function onIntervalChange(event) {\n    setInterval(event.target.value);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"select\", {\n      onChange: onSymbolChange,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        children: \"BTCUSDT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        children: \"ETHUSDT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        children: \"ADAUSDT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      onChange: onIntervalChange,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        children: \"1m\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        children: \"1d\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        children: \"1w\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Chart, {\n      data: data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"N8rX35Gr+fhPGEvHwynAUoMUC20=\", false, function () {\n  return [useWebSocket];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","Chart","Candle","getCandles","useWebSocket","App","symbol","setSymbol","interval","setInterval","data","setData","then","catch","err","console","log","lastJsonMessage","toLowerCase","onOpen","onError","shouldReconnect","reconnectInterval","onMessage","newCandle","k","t","o","h","l","c","newData","x","length","splice","push","onSymbolChange","event","target","value","onIntervalChange"],"sources":["/home/evandro/MEGA/Projetos/estudo/tradingview/src/App.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport Chart from './Chart'\nimport Candle from './Candle'\nimport { getCandles } from './DataService';\nimport useWebSocket from 'react-use-websocket';\n\nfunction App() {\n\n  const [symbol, setSymbol] = useState('BTCUSDT');\n  const [interval, setInterval] = useState('1m');\n  const [data, setData] = useState([]);\n\n  useEffect(() => {\n    getCandles(symbol, interval).then(data => setData(data)).catch(err => console.log(err));\n  }, [symbol, interval]);\n\n  const {lastJsonMessage} = useWebSocket(`wss://stream.binance.com:9443/ws/${symbol.toLowerCase()}@kline_${interval}`,\n  {\n    onOpen: () => console.log('Connected to Binance'),\n    onError: (err) => console.log(err),\n    shouldReconnect: () => true,\n    reconnectInterval: 3000,\n    onMessage: () => {\n      if(lastJsonMessage){\n        const newCandle = new Candle(lastJsonMessage.k.t, lastJsonMessage.k.o, lastJsonMessage.k.h, lastJsonMessage.k.l, lastJsonMessage.k.c);\n        const newData = [...data];\n\n        if(!lastJsonMessage.k.x){\n          newData[newData.length - 1] = newCandle;\n        }else{\n          newData.splice(0,1);\n          newData.push(newCandle);\n        }\n\n        setData(newData);\n      }\n    }\n  })\n\n  function onSymbolChange(event) {\n    setSymbol(event.target.value);\n  }\n\n  function onIntervalChange(event) {\n    setInterval(event.target.value);\n  }\n\n  return (\n    <div>\n      <select onChange={onSymbolChange}>\n        <option>BTCUSDT</option>\n        <option>ETHUSDT</option>\n        <option>ADAUSDT</option>\n      </select>\n      <select onChange={onIntervalChange}>\n        <option>1m</option>\n        <option>1d</option>\n        <option>1w</option>\n      </select>\n      <Chart data={data} />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}